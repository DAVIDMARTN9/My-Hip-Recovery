<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Hip Replacement Recovery Diary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Lighter, modern background */
        }
        .container-wrapper {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.08); /* More pronounced shadow */
            padding: 1.5rem; /* Reduced padding for mobile */
            max-width: 900px; /* Slightly wider main container */
            margin: 2rem auto; /* Centered with margin */
            width: 95%; /* Responsive width */
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .container-wrapper {
                padding: 2.5rem;
            }
        }
        @media (min-width: 768px) {
            .container-wrapper {
                padding: 3rem;
            }
        }
        .diary-nav-button {
            background-color: #4f46e5; /* Deep Indigo */
            color: white;
            padding: 0.75rem 1.5rem; /* Larger buttons */
            border-radius: 0.75rem; /* More rounded */
            font-weight: 600; /* Semibold */
            transition: all 0.2s ease-in-out; /* Smooth transition for all properties */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            display: inline-flex; /* For better icon/text alignment if needed */
            align-items: center;
            justify-content: center;
        }
        .diary-nav-button:hover {
            background-color: #4338ca; /* Darker Indigo */
            transform: translateY(-2px); /* Slight lift effect */
            box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .diary-nav-button:disabled {
            background-color: #a7b0bd; /* Muted gray */
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .day-selector-button {
            background-color: #eef2ff; /* Very light Indigo */
            color: #4f46e5; /* Deep Indigo text */
            padding: 0.6rem 1rem; /* Slightly larger */
            border-radius: 0.6rem; /* More rounded */
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            border: 1px solid #c3daff; /* Subtle border */
            white-space: nowrap; /* Prevent wrapping for short titles */
        }
        .day-selector-button:hover {
            background-color: #c7d2fe; /* Lighter blue on hover */
            transform: translateY(-1px);
        }
        .day-selector-button.active {
            background-color: #4f46e5; /* Active is deep indigo */
            color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transform: translateY(0);
        }
        .content-card {
            background-color: #ffffff;
            border-radius: 1rem; /* Modern rounded corners */
            box-shadow: 0 5px 15px -3px rgba(0, 0, 0, 0.1), 0 3px 6px -2px rgba(0, 0, 0, 0.05); /* Subtle shadow */
            padding: 2rem; /* Generous padding */
            margin-top: 2rem; /* More space */
            line-height: 1.7; /* Better readability */
            color: #374151; /* Darker text for readability */
        }
        .prose strong { color: #3730a3; } /* Darker indigo for bolded text */
        .language-toggle-button {
            background-color: #dc2626; /* Stronger Red */
            color: white;
            padding: 0.75rem 1.5rem; /* Larger buttons */
            border-radius: 0.75rem; /* More rounded */
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .language-toggle-button:hover {
            background-color: #b91c1c; /* Darker Red */
            transform: translateY(-2px);
            box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .diary-image {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem; /* More rounded images */
            box-shadow: 0 3px 8px rgba(0,0,0,0.15); /* Slightly stronger shadow */
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
        }
        /* Custom styling for list items and paragraph spacing */
        .prose ul {
            list-style-type: disc; /* Ensure bullet points are visible */
            margin-left: 1.5em; /* Indent lists */
            padding-left: 0;
            list-style-position: outside; /* Ensure bullets are outside padding */
        }
        .prose li {
            margin-bottom: 0.75em; /* More space between list items */
        }
        .prose p + p {
            margin-top: 1.25em; /* More space between paragraphs */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px; /* Slightly wider chart area */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 450px;
            background-color: #fbfbfc; /* Very light background for chart */
            border-radius: 1rem;
            box-shadow: 0 5px 15px -3px rgba(0, 0, 0, 0.08), 0 3px 6px -2px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
            border: 1px solid #e0e7ff; /* Subtle border */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .exercise-details-card {
            background-color: #fbfbfc;
            border-radius: 1rem;
            box-shadow: 0 5px 15px -3px rgba(0, 0, 0, 0.08), 0 3px 6px -2px rgba(0, 0, 0, 0.03);
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid #e0e7ff;
        }
        .day0-highlight {
            color: #dc2626; /* Stronger Red for Day 0 title */
        }
        .week-summary-highlight {
            color: #0d9488; /* Teal for Week Summary title */
        }
        .prose h3 {
            color: #1a2b4b; /* Darker heading color */
            font-weight: 700;
        }
        .prose h4 {
            color: #374151; /* Subheading color */
            font-weight: 600;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-8 px-4">
    <div class="container-wrapper">
        <div class="flex justify-end mb-6 gap-3">
            <button id="language-toggle" class="language-toggle-button">ðŸ‡ªðŸ‡¸ EspaÃ±ol</button>
            <button id="toggle-progress-button" class="diary-nav-button">ðŸ“Š Show Progress</button>
        </div>
        <header class="text-center mb-10">
            <h1 id="main-title" class="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight">My Hip Replacement Recovery Diary</h1>
            <p id="subtitle" class="text-gray-600 mt-4 text-xl font-medium">Navigating recovery, one day at a time. Every step is progress.</p>
        </header>
        <nav class="mb-8">
            <div id="day-selector-container" class="flex flex-wrap justify-center gap-2.5 mb-6">
                </div>
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <button id="prev-day-button" class="diary-nav-button w-full sm:w-auto">Previous Day</button>
                <h2 id="current-day-title" class="text-2xl sm:text-3xl font-semibold text-gray-800 text-center mx-4 flex-grow"></h2>
                <button id="next-day-button" class="diary-nav-button w-full sm:w-auto">Next Day</button>
            </div>
        </nav>
        <main id="diary-entry-content" class="content-card prose lg:prose-xl max-w-none">
            <p>Loading diary...</p>
        </main>
        <section id="progress-section" class="hidden mt-10">
            <h3 id="progress-title" class="text-3xl font-bold text-gray-800 mb-5 text-center">Exercise Progress</h3>
            <p id="progress-description" class="text-gray-600 mb-8 text-center text-lg">This chart visualizes the number of exercise sets completed each day, tracking your progress since the surgery, and other vital metrics.</p>
            <div class="chart-container">
                <canvas id="exerciseProgressChart"></canvas>
            </div>
            <h3 id="weekly-progress-title" class="text-3xl font-bold text-gray-800 mb-5 text-center mt-10">Weekly Volume Comparison</h3>
            <p id="weekly-progress-description" class="text-gray-600 mb-8 text-center text-lg">Compare your total weekly exercise volumes to visualize consistent growth and recovery milestones.</p>
            <div class="chart-container">
                <canvas id="weeklyComparisonChart"></canvas>
            </div>
            <div id="exercise-details-card" class="exercise-details-card prose lg:prose-xl max-w-none mt-8">
                <h4 id="exercise-details-title" class="text-2xl font-semibold text-gray-700 mb-5">Daily Exercise Breakdown</h4>
                <div id="current-day-stats" class="text-lg text-gray-800 mb-6 space-y-2"></div>
                <ul id="exercise-list" class="list-disc ml-6">
                    </ul>
            </div>
        </section>
        <footer class="text-center mt-16 text-gray-500 text-sm">
            <p id="footer-text" class="text-base">&copy; 2025 My Recovery Journey. All rights reserved (for the diarist!).</p>
        </footer>
    </div>
    <script>
    // --- DATA --- //
    // This section contains all the diary entries and exercise descriptions in both English and Spanish.
    const strengthRoutineEN = [
        { name: "1. Heel raises", desc: "Stand tall, with your weight distributed evenly on both feet, and take support if needed. Rise up onto your toes and in a controlled manner return to the starting position. Try not to bend your knees. Make sure feet are straight as you come down, do not let them roll outwards." },
        { name: "2. Mini squat with support", desc: "Stand and take support if needed. Squat down to a semi-squat position and at the same time move your pelvis slightly backwards, pushing your bottom back. Keep your back straight & keep heels in contact with the ground at all times. Straighten your hips and slowly return to the starting position, trying to tighten your buttock muscles." },
        { name: "3. Active knee flexion in standing", desc: "Stand tall and take support if needed. Transfere weight onto unaffected leg. Bend your knee on the operated leg and take the heel towards your buttocks as far as you can tolerate. Keep both thighs parallel, try not to arch your back or bring your knee forwards. Hold for 5 seconds. Return to the starting position." },
        { name: "4. Hip abduction in standing", desc: "Stand tall and take support if needed. Lift your affected leg sideways and outwards as far as is comfortable, keeping your knee straight. Then bring it back down, keeping your trunk straight throughout the exercise." },
        { name: "5. Standing hip flexion", desc: "Stand straight, holding onto a support. Transfer weight onto unaffected leg. Bend the hip and lift the knee of the operated leg up as far as you cannot above 90 degrees. Hold for a moment & then bring slowly back down." },
        { name: "6. Hip extension in standing", desc: "Stand tall holding onto a support. Transfer weight on to unaffected leg. Tighten the buttocks on the operated side and bring the leg slowly backwards, trying to keep your knee straight. Try to stay standing upright and not to lean forwards. Slowly return to start position." },
        { name: "7. Abdominal exercises", desc: "Gentle abdominal exercises to activate the core without strain, focusing on the front and superior regions." },
        { name: "8. Hamstring Stretches", desc: "Slow and controlled stretches to release tension in the back of the legs." },
        { name: "9. Glute Bridges", desc: "Lying on your back with knees bent, lift your hips off the ground to activate glutes and improve hip stability." },
        { name: "10. Dead Weight Lift (with bar)", desc: "Using a bar with minimal weight (e.g., 12 kg), perform deadlifts. Focus on proper form to engage the glutes and hamstrings without straining the back. Keep a slight bend in the knees and hinge at the hips." },
        { name: "11. Single-Leg Squats", desc: "Perform squats on one leg, focusing on stability and strength in the glutes and thighs. Use support if needed, and control the descent and ascent to maintain balance." },
        { name: "12. Push-ups", desc: "Standard push-ups to maintain upper body strength. Can be modified by doing them on knees or against a wall if full push-ups are too challenging." },
        { name: "13. Shoulder Flies", desc: "Light shoulder flies using minimal or no weights, focusing on deltoid activation and upper body mobility." },
        { name: "14. Biceps Curl", desc: "Gentle biceps curls with light weights or resistance bands to keep arm muscles active." }
    ];
    const strengthRoutineES = [
        { name: "1. ElevaciÃ³n de talones", desc: "Â¡Arriba esos talones! Ponte bien erguido, reparte el peso en ambos pies y, si lo necesitas, apÃ³yate. Sube sobre la puntas de los pies y baja con control. Intenta no doblar las rodillas y asegÃºrate de que los pies bajen rectos, Â¡que no se te vayan hacia los lados!" },
        { name: "2. Mini sentadilla con apoyo", desc: "Ponte de pie y busca un apoyo si lo necesitas. Baja como si fueras a sentarte a medias, y al mismo tiempo echa la pelvis un poquito hacia atrÃ¡s, sacando el culete. MantÃ©n la espalda recta y los talones pegados al suelo. Estira las caderas y sube despacio, intentando apretar los glÃºteos. Â¡A darle caÃ±a a esos mÃºsculos!" },
        { name: "3. FlexiÃ³n activa de rodilla de pie", desc: "PÃ¡rese erguido y apÃ³yese si es necesario. Transfiera el peso a la pierna no afectada. Doble la rodilla de la pierna operada y lleve el talÃ³n hacia los glÃºteos tan lejos como pueda tolerar. Mantenga ambos muslos paralelos, intente no arquear la espalda ni adelantar la rodilla. Mantenga durante 5 segundos. Vuelva a la posiciÃ³n inicial." },
        { name: "4. AbducciÃ³n de cadera de pie", desc: "PÃ¡rese erguido y apÃ³yese si es necesario. Ponga su peso sobre la pierna no afectada. Levante la pierna afectada hacia los lados y hacia afuera tan lejos como le resulte cÃ³modo, manteniendo la rodilla recta. Luego bÃ¡jela, manteniendo el tronco recto durante todo el ejercicio." },
        { name: "5. FlexiÃ³n de cadera de pie", desc: "PÃ¡rese recto, sujetÃ¡ndose a un apoyo. Transferir peso a la pierna no afectada. Doble la cadera y levante la rodilla de la pierna operada tan alto como pueda, sin superar los 90 grados. Mantenga un momento y luego baje lentamente." },
        { name: "6. ExtensiÃ³n de cadera de pie", desc: "PÃ¡rese erguido, sujetÃ¡ndose a un apoyo. Transfiera el peso a la pierna no afectada. Tense los glÃºteos del lado operado y lleve la pierna lentamente hacia atrÃ¡s, intentando mantener la rodilla recta. Try to stay standing upright and not to lean forwards. Slowly return to start position." },
        { name: "7. Ejercicios abdominales", desc: "Ejercicios abdominales suaves para activar el core sin forzar, centrÃ¡ndose en las regiones frontal y superior." },
        { name: "8. Estiramientos de isquiotibiales", desc: "Estiramientos lentos y controlados para liberar tensiÃ³n en la parte trasera de las piernas." },
        { name: "9. Puentes de glÃºteos", desc: "Tumbado boca arriba con las rodillas flexionadas, levante las caderas del suelo para activar los glÃºteos y mejorar la estabilidad de la cadera." },
        { name: "10. Peso Muerto (con barra)", desc: "Realizar peso muerto con una barra de peso mÃ­nimo (ej. 12 kg). Concentrarse en la forma correcta para activar glÃºteos e isquiotibiales sin forzar la espalda. Mantener una ligera flexiÃ³n en las rodillas y bisagrar desde las caderas." },
        { name: "11. Sentadillas a una pierna", desc: "Realizar sentadillas con una sola pierna, centrÃ¡ndose en la estabilidad y fuerza de los glÃºteos y muslos. Usar apoyo si es necesario y controlar el descenso y ascenso para mantener el equilibrio." },
        { name: "12. Flexiones", desc: "Flexiones estÃ¡ndar para mantener la fuerza de la parte superior del cuerpo. Se pueden modificar apoyando las rodillas o contra una pared si las flexiones completas son demasiado desafiantes." },
        { name: "13. Elevaciones laterales de hombros", desc: "Elevaciones laterales de hombros ligeras, con pesas mÃ­nimas o sin ellas, centrÃ¡ndose en la activaciÃ³n del deltoides y la movilidad de la parte superior del cuerpo." },
        { name: "14. Curl de bÃ­ceps", desc: "Curl de bÃ­ceps suave con pesas ligeras o bandas de resistencia para mantener activos los mÃºsculos de los brazos." }
    ];
    const stretchingRoutineEN = [
        { name: "1. Core Engagement", desc: "Gentle abdominal exercises to activate the core without strain." },
        { name: "2. Hamstring Stretches", desc: "Slow and controlled stretches to release tension in the back of the legs." },
        { name: "3. Glute Bridges / Hip Thrusts", desc: "Lying on the back, lifting the hips to activate the glutes and improve hip stability." },
        { name: "4. Supine Hip Elevations", desc: "Similar to glute bridges, focusing on a controlled elevation to strengthen the hip area." },
        { name: "5. Low Back & Abdominal Stretch", desc: "Gentle stretches to release tension in the lower back and abdominal muscles." }
    ];
    const stretchingRoutineES = [
        { name: "1. ActivaciÃ³n de Core", desc: "Ejercicios abdominales suaves para activar el core sin forzar." },
        { name: "2. Estiramientos de Isquiotibiales", desc: "Estiramientos lentos y controlados para liberar tensiÃ³n en la parte trasera de las piernas." },
        { name: "3. Puentes de GlÃºteos / Empuje de Cadera", desc: "Tumbado boca arriba, levantando las caderas para activar los glÃºteos y mejorar la estabilidad." },
        { name: "4. Elevaciones de Cadera en Supino", desc: "Similar a los puentes de glÃºteos, centrÃ¡ndose en una elevaciÃ³n controlada para fortalecer la zona." },
        { name: "5. Estiramiento Lumbar y Abdominal", desc: "Estiramientos suaves para liberar tensiÃ³n en la zona lumbar y los mÃºsculos abdominales." }
    ];
    const diaryEntriesBase = [
        { id: "day-minus-1", date: "2025-05-26", title: "Day -1: Monday, May 26, 2025", shortTitle: "Day -1", exerciseSets: 0, moveKcals: 0, exerciseMinutes: 0, standHours: 0, walkDistanceKm: 0, contentEN: `<p>Since the beginning of 2025... [Content continues as before]</p>`, contentES: `<p>Desde que empezÃ³ 2025... [Content continues as before]</p>` },
        { id: "day-0", date: "2025-05-27", title: "Day 0: Tuesday, May 27, 2025 â€“ <span class='day0-highlight'>Surgery Day</span>", shortTitle: "Day 0", exerciseSets: 0, moveKcals: 0, exerciseMinutes: 0, standHours: 0, walkDistanceKm: 0, contentEN: `<p>Today was the day!... [Content continues as before]</p>`, contentES: `<p>Â¡LlegÃ³ el dÃ­a!... [Content continues as before]</p>` },
        // ... ALL OTHER DAY ENTRIES (Day 1 to 22) GO HERE, UNCHANGED ...
        // To save space, the large content of each day is omitted here, but should be included in your final file.
        // --- WEEKLY SUMMARIES ---
        { id: "week-1-summary", date: "2025-06-03", title: "Week 1 Summary: Days 1 to 7", shortTitle: "Week 1", isSummary: true, contentEN: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Looking Back at Week 1...</h3>`, contentES: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Mirando AtrÃ¡s a la Semana 1...</h3>` },
        { id: "week-2-summary", date: "2025-06-10", title: "Week 2 Summary: Days 8 to 14", shortTitle: "Week 2", isSummary: true, contentEN: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Looking Back at Week 2...</h3>`, contentES: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Mirando AtrÃ¡s a la Semana 2...</h3>` },
        { id: "week-3-summary", date: "2025-06-18", title: "Week 3 Summary: Days 15 to 21", shortTitle: "Week 3", isSummary: true, contentEN: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Looking Back at Week 3...</h3>`, contentES: `<h3 class="text-2xl font-bold text-gray-800 mb-4">Mirando AtrÃ¡s a la Semana 3...</h3>` }
    ];

    // --- NEW: AGILE CONFIGURATION FOR BUTTON LAYOUT ---
    const buttonLayout = [
        'day--1', 'day-0', 'day-1', 'day-2', 'day-3', 'day-4', 'day-5', 'day-6', 'day-7',
        'week-1-summary',
        'day-8', 'day-9', 'day-10', 'day-11', 'day-12', 'day-13', 'day-14',
        'week-2-summary',
        'day-15', 'day-16', 'day-17', 'day-18', 'day-19', 'day-20', 'day-21',
        'week-3-summary', // Moved as requested
        'day-22'
    ];

    const uiTexts = {
        en: {
            mainTitle: "My Hip Replacement Recovery Diary",
            subtitle: "Navigating recovery, one day at a time. Every step is progress.",
            prevButton: "Previous Day",
            nextButton: "Next Day",
            footer: "&copy; 2025 My Recovery Journey. All rights reserved (for the diarist!).",
            toggleTo: "ðŸ‡ªðŸ‡¸ EspaÃ±ol",
            showProgress: "ðŸ“Š Show Progress",
            hideProgress: "ðŸ“Š Hide Progress",
            progressTitle: "Exercise Progress",
            progressDescription: "This chart visualizes the number of exercise sets completed each day, tracking your progress since the surgery, and other vital metrics.",
            weeklyProgressTitle: "Weekly Volume Comparison",
            weeklyProgressDescription: "Compare your total weekly exercise volumes to visualize consistent growth and recovery milestones.",
            chartLabelSets: "Sets Completed (x5 for scale)",
            chartLabelKcals: "Move (KCAL / 10 for scale)",
            chartLabelExerciseMinutes: "Exercise (minutes)",
            chartLabelWalkDistance: "Walk Distance (km)",
            dailyExerciseBreakdown: "Daily Exercise Breakdown",
            setsCompleted: "Sets Completed:",
            totalExerciseTime: "Total Exercise Time:",
            minutes: "minutes",
            exerciseInstructions: "Exercise Instructions:",
            sameRoutine: "Same routine as Day 1:",
            restDayRoutine: "Rest Day Stretching Routine:",
            noExercises: "No exercises recorded for this day.",
            walkDistance: "Walk Distance:",
            dayPrefix: "Day",
            weekPrefix: "Week",
            standHours: "Stand Hours"
        },
        es: {
            mainTitle: "Mi Diario de RecuperaciÃ³n de Reemplazo de Cadera",
            subtitle: "Proceso de recuperaciÃ³n. Partido a partido. Cada paso es progreso.",
            prevButton: "DÃ­a Anterior",
            nextButton: "DÃ­a Siguiente",
            footer: "&copy; 2025 Mi Viaje de RecuperaciÃ³n. Todos los derechos reservados (Â¡para el diarista!).",
            toggleTo: "ðŸ‡¬ðŸ‡§ English",
            showProgress: "ðŸ“Š Mostrar Progreso",
            hideProgress: "ðŸ“Š Ocultar Progreso",
            progressTitle: "Progreso de Ejercicios",
            progressDescription: "Este grÃ¡fico visualiza el nÃºmero de series de ejercicios completadas cada dÃ­a, Â¡siguiendo tu progreso desde la cirugÃ­a, y otras mÃ©tricas vitales!",
            weeklyProgressTitle: "ComparaciÃ³n de Volumen Semanal",
            weeklyProgressDescription: "Compara tus volÃºmenes totales de ejercicio semanales para visualizar el crecimiento constante y los hitos de recuperaciÃ³n.",
            chartLabelSets: "Series Completadas (x5 para escala)",
            chartLabelKcals: "Movimiento (KCAL / 10 para escala)",
            chartLabelExerciseMinutes: "Ejercicio (minutos)",
            chartLabelWalkDistance: "Distancia Caminada (km)",
            dailyExerciseBreakdown: "Detalle de Ejercicios Diarios",
            setsCompleted: "Series Completadas:",
            totalExerciseTime: "Tiempo Total de Ejercicio:",
            minutes: "minutos",
            exerciseInstructions: "Instrucciones de Ejercicio:",
            sameRoutine: "Misma rutina que el DÃ­a 1:",
            restDayRoutine: "Rutina de Estiramientos (DÃ­a de Descanso):",
            noExercises: "Â¡No se registraron ejercicios para este dÃ­a!",
            walkDistance: "Distancia Caminada:",
            dayPrefix: "DÃ­a",
            weekPrefix: "Semana",
            standHours: "Horas de Pie"
        }
    };
    
    // --- STATE & DOM ELEMENTS --- //
    // ... (This part remains mostly the same) ...

    // --- REFACTORED FUNCTION --- //
    /**
     * Creates and populates the day selector buttons based on the buttonLayout configuration.
     */
    function populateDaySelectors() {
        daySelectorContainer.innerHTML = '';
        const entriesMap = new Map(diaryEntriesBase.map(entry => [entry.id.replace('day-minus','day--'), entry]));

        buttonLayout.forEach(id => {
            const entry = entriesMap.get(id);
            if (!entry) {
                console.warn(`Entry with id "${id}" not found in diaryEntriesBase.`);
                return;
            }

            const button = document.createElement('button');
            let shortTitle = entry.shortTitle;
            if (currentLanguage === 'es') {
                if(entry.shortTitle.startsWith('Day')) {
                   shortTitle = entry.shortTitle.replace('Day', uiTexts[currentLanguage].dayPrefix);
                } else if (entry.shortTitle.startsWith('Week')) {
                    shortTitle = entry.shortTitle.replace('Week', uiTexts[currentLanguage].weekPrefix);
                }
            }
            button.textContent = shortTitle;
            button.classList.add('day-selector-button');
            if (entry.id.includes("day-0")) button.classList.add('day0-highlight');
            if (entry.isSummary) button.classList.add('week-summary-highlight');

            button.addEventListener('click', () => {
                currentEntryIndex = diaryEntriesBase.findIndex(e => e.id === entry.id);
                updateDiaryDisplay();
            });
            daySelectorContainer.appendChild(button);
        });
    }

    // --- OTHER FUNCTIONS --- //
    // ... (The rest of your JavaScript functions like updateUIText, updateDiaryDisplay, etc., remain here, mostly unchanged) ...
    // Note: The original populateDaySelectors function should be replaced by the one above.
    // Ensure all other functions continue to work as expected.
    </script>
</body>
</html>